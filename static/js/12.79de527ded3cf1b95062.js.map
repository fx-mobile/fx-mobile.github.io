{"version":3,"sources":["webpack:///./src/pages/message/index.vue?2c60","webpack:///./src/pages/message/index.vue?9e67","webpack:///src/pages/message/index.vue","webpack:///./src/pages/message/index.vue?1b5f","webpack:///./src/pages/message/index.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_9_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_node_modules_sass_resources_loader_lib_loader_js_ref_9_3_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_716a8bf6_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","staticStyle","position","top","width","z-index","model","value","mSelected","callback","$$v","expression","attrs","id","_v","directives","name","rawName","messageBadgeNum","_s","backlogBadgeNum","loadMore","infinite-scroll-disabled","infinite-scroll-distance","_l","messageList","item","index","key","data","nativeOn","click","$event","toArticle","length","noMessageTip","cutFooter","unit","cutHeight","tip","_e","todoList","todo","toApprove","noTodoTip","_withStripped","vue_esm","use","fx_mui_common","component","pages_messagevue_type_script_lang_js_","components","noData","loading","numList","sum","pageNum","limit","isBacklog","loginStatus","watch","nv","computed","mounted","msgMainPt","window","addEventListener","created","msign","sessionStorageUtil","getItem","USER_LOGIN_STATUS","console","log","userinfo","Object","common","getMyMsg","getMyTodo","$route","query","selected","methods","$refs","mtNavbar","$el","clientHeight","msgMain","style","paddingTop","c","innerHeight","document","getElementsByClassName","querySelectorAll","cssText","_this","api_async","that","method","paramObj","res","total","concat","msgs","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","status","isRead","err","return","unReadNum","sumBadge","_this2","todos","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isProcess","unProcessNum","num","push","$store","dispatch","validation","nsr","role","yhsfdm","type","$router","path","dlbasqid","stringify_default","toLogin","redirect_url","fullPath","destroyed","removeEventListener","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/12.79de527ded3cf1b95062.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--9-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=716a8bf6&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--9-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=716a8bf6&scoped=true&lang=scss&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { ref: \"msgMain\", staticClass: \"message-main\" },\n    [\n      _c(\n        \"mt-navbar\",\n        {\n          ref: \"mtNavbar\",\n          staticStyle: {\n            position: \"fixed\",\n            top: \"0\",\n            width: \"100%\",\n            \"z-index\": \"99\"\n          },\n          model: {\n            value: _vm.mSelected,\n            callback: function($$v) {\n              _vm.mSelected = $$v\n            },\n            expression: \"mSelected\"\n          }\n        },\n        [\n          _c(\"mt-tab-item\", { attrs: { id: \"message\" } }, [\n            _vm._v(\"\\n      消息\\n      \"),\n            _c(\n              \"span\",\n              {\n                directives: [\n                  {\n                    name: \"show\",\n                    rawName: \"v-show\",\n                    value: _vm.messageBadgeNum > 0,\n                    expression: \"messageBadgeNum>0\"\n                  }\n                ],\n                staticClass: \"badge\"\n              },\n              [_vm._v(_vm._s(_vm.messageBadgeNum))]\n            )\n          ]),\n          _vm._v(\" \"),\n          _c(\"mt-tab-item\", { attrs: { id: \"backlog\" } }, [\n            _vm._v(\"\\n      预警\\n      \"),\n            _c(\n              \"span\",\n              {\n                directives: [\n                  {\n                    name: \"show\",\n                    rawName: \"v-show\",\n                    value: _vm.backlogBadgeNum > 0,\n                    expression: \"backlogBadgeNum>0\"\n                  }\n                ],\n                staticClass: \"badge\"\n              },\n              [_vm._v(_vm._s(_vm.backlogBadgeNum))]\n            )\n          ])\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"mt-tab-container\",\n        {\n          model: {\n            value: _vm.mSelected,\n            callback: function($$v) {\n              _vm.mSelected = $$v\n            },\n            expression: \"mSelected\"\n          }\n        },\n        [\n          _c(\"mt-tab-container-item\", { attrs: { id: \"message\" } }, [\n            _c(\n              \"div\",\n              {\n                directives: [\n                  {\n                    name: \"infinite-scroll\",\n                    rawName: \"v-infinite-scroll\",\n                    value: _vm.loadMore,\n                    expression: \"loadMore\"\n                  }\n                ],\n                attrs: {\n                  \"infinite-scroll-disabled\": \"loading\",\n                  \"infinite-scroll-distance\": \"10\"\n                }\n              },\n              _vm._l(_vm.messageList, function(item, index) {\n                return _c(\"message-card\", {\n                  key: index,\n                  attrs: { data: item },\n                  nativeOn: {\n                    click: function($event) {\n                      return _vm.toArticle(item)\n                    }\n                  }\n                })\n              }),\n              1\n            ),\n            _vm._v(\" \"),\n            _vm.messageList.length == 0 && _vm.noMessageTip\n              ? _c(\n                  \"div\",\n                  { staticClass: \"no-tip\" },\n                  [\n                    _c(\"no-data\", {\n                      attrs: {\n                        cutFooter: \"\",\n                        unit: \"px\",\n                        cutHeight: _vm.cutHeight,\n                        tip: _vm.noMessageTip\n                      }\n                    })\n                  ],\n                  1\n                )\n              : _vm._e()\n          ]),\n          _vm._v(\" \"),\n          _c(\"mt-tab-container-item\", { attrs: { id: \"backlog\" } }, [\n            _c(\n              \"div\",\n              _vm._l(_vm.todoList, function(item, index) {\n                return _c(\"message-card\", {\n                  key: index,\n                  attrs: { todo: \"\", data: item },\n                  nativeOn: {\n                    click: function($event) {\n                      return _vm.toApprove(item)\n                    }\n                  }\n                })\n              }),\n              1\n            ),\n            _vm._v(\" \"),\n            _vm.messageList.length == 0 && _vm.noTodoTip\n              ? _c(\n                  \"div\",\n                  { staticClass: \"no-tip\" },\n                  [\n                    _c(\"no-data\", {\n                      attrs: {\n                        cutFooter: \"\",\n                        unit: \"px\",\n                        cutHeight: _vm.cutHeight,\n                        tip: _vm.noTodoTip\n                      }\n                    })\n                  ],\n                  1\n                )\n              : _vm._e()\n          ])\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"message-main\" ref=\"msgMain\">\r\n    <mt-navbar\r\n      ref=\"mtNavbar\"\r\n      v-model=\"mSelected\"\r\n      style=\"position:fixed;top:0;width:100%;z-index:99;\"\r\n    >\r\n      <mt-tab-item id=\"message\">\r\n        消息\r\n        <span class=\"badge\" v-show=\"messageBadgeNum>0\">{{messageBadgeNum}}</span>\r\n      </mt-tab-item>\r\n      <mt-tab-item id=\"backlog\">\r\n        预警\r\n        <span class=\"badge\" v-show=\"backlogBadgeNum>0\">{{backlogBadgeNum}}</span>\r\n      </mt-tab-item>\r\n    </mt-navbar>\r\n\r\n    <!-- tab-container -->\r\n    <mt-tab-container v-model=\"mSelected\">\r\n      <mt-tab-container-item id=\"message\">\r\n        <div\r\n          v-infinite-scroll=\"loadMore\"\r\n          infinite-scroll-disabled=\"loading\"\r\n          infinite-scroll-distance=\"10\"\r\n        >\r\n          <message-card\r\n            @click.native=\"toArticle(item)\"\r\n            v-for=\"(item,index) in messageList\"\r\n            :data=\"item\"\r\n            :key=\"index\"\r\n          ></message-card>\r\n        </div>\r\n        <div class=\"no-tip\" v-if=\"messageList.length == 0 && noMessageTip\">\r\n          <no-data cutFooter unit=\"px\" :cutHeight=\"cutHeight\" :tip=\"noMessageTip\"></no-data>\r\n        </div>\r\n      </mt-tab-container-item>\r\n      <mt-tab-container-item id=\"backlog\">\r\n        <div>\r\n          <message-card\r\n            @click.native=\"toApprove(item)\"\r\n            todo\r\n            v-for=\"(item,index) in todoList\"\r\n            :data=\"item\"\r\n            :key=\"index\"\r\n          ></message-card>\r\n        </div>\r\n        <div class=\"no-tip\" v-if=\"messageList.length == 0 && noTodoTip\">\r\n          <no-data cutFooter unit=\"px\" :cutHeight=\"cutHeight\" :tip=\"noTodoTip\"></no-data>\r\n        </div>\r\n      </mt-tab-container-item>\r\n    </mt-tab-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { Navbar, TabItem, Toast,InfiniteScroll } from \"fx-mui\";\r\nimport { customAsync } from \"@/api/async\";\r\nimport sessionStorageUtil from \"@/utils/sessionStorageUtil\";\r\nimport noData from \"@/components/common/noData\";\r\nimport { getUserInfo } from \"@/assets/js/common\";\r\nimport { isEmpty } from \"@/utils/validation\";\r\n\r\nVue.use(InfiniteScroll);\r\nVue.component(Navbar.name, Navbar);\r\nVue.component(TabItem.name, TabItem);\r\nexport default {\r\n  components: {\r\n    noData\r\n  },\r\n  data() {\r\n    return {\r\n      mSelected: \"message\",\r\n      loading: true,\r\n      messageList: [],\r\n      todoList: [],\r\n      messageBadgeNum: 0,\r\n      backlogBadgeNum: 0,\r\n      numList: [],\r\n      sum: 0,\r\n      noMessageTip: \"\",\r\n      noTodoTip: \"\",\r\n      pageNum: 1,\r\n      limit: 10,\r\n      isBacklog: false,\r\n      loginStatus: null,\r\n      cutHeight: 0\r\n    };\r\n  },\r\n  watch: {\r\n    mSelected(nv) {\r\n      if (nv == \"backlog\") {\r\n        this.isBacklog = true;\r\n      } else {\r\n        this.isBacklog = false;\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n    this.msgMainPt();\r\n    window.addEventListener(\"resize\", this.msgMainPt);\r\n  },\r\n  created() {\r\n    this.msign = false;\r\n    this.numList = [];\r\n    this.messageList = [];\r\n    this.pageNum = 1;\r\n    this.sum = 0;\r\n    this.loginStatus = sessionStorageUtil.getItem(\r\n      sessionStorageUtil.USER_LOGIN_STATUS\r\n    );\r\n    console.log(\"this.loginStatus\", this.loginStatus);\r\n    if (!!sessionStorageUtil.getItem(\"user.login.info\")) {\r\n      this.userinfo = sessionStorageUtil.getItem(\"user.login.info\");\r\n    } else {\r\n      getUserInfo(this);\r\n    }\r\n    if (this.loginStatus) {\r\n      this.getMyMsg();\r\n      this.getMyTodo();\r\n    }\r\n    if (this.$route.query.selected) {\r\n      this.mSelected = this.$route.query.selected;\r\n    }\r\n  },\r\n  methods: {\r\n    msgMainPt() {\r\n      this.cutHeight = this.$refs.mtNavbar.$el.clientHeight;\r\n      this.$refs.msgMain.style.paddingTop = this.cutHeight + \"px\";\r\n      let w = window.innerHeight;\r\n      let f = document.getElementsByClassName(\"entry-footer\")[0].clientHeight;\r\n      let c = w - f - this.cutHeight + \"px\";\r\n      console.log(\"c\", c);\r\n      document.querySelectorAll(\r\n        \".message-main .mint-tab-container-item\"\r\n      )[0].style.cssText = \"height:\" + c;\r\n      document.querySelectorAll(\r\n        \".message-main .mint-tab-container-item\"\r\n      )[1].style.cssText = \"height:\" + c;\r\n    },\r\n    getMyMsg() {\r\n      customAsync({\r\n        that: this,\r\n        method: \"getMyMsg\",\r\n        paramObj: { limit: this.limit, pageNum: this.pageNum },\r\n        callback: res => {\r\n          // console.log(\"res\", res);\r\n          if (res.data.total == 0) {\r\n            this.noMessageTip = \"暂无消息\";\r\n          } else {\r\n            this.loading = false;\r\n            this.messageList = this.messageList.concat(res.data.msgs);\r\n            for (let item of this.messageList) {\r\n              item.status = item.isRead;\r\n            }\r\n          }\r\n          console.log(\"this.messageList.length\", this.messageList.length);\r\n          console.log(\"res.data.total\", res.data.total);\r\n          if (this.messageList.length >= res.data.total) {\r\n            this.loading = true;\r\n          }\r\n          if (!this.msign) {\r\n            this.messageBadgeNum = res.data.unReadNum;\r\n            this.sumBadge(this.messageBadgeNum);\r\n            this.msign = true;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getMyTodo() {\r\n      console.log(2);\r\n      customAsync({\r\n        that: this,\r\n        method: \"getMyTodo\",\r\n        paramObj: {},\r\n        callback: res => {\r\n          // console.log(\"res\", res);\r\n          if (res.data.todos.length == 0) {\r\n            this.noTodoTip = \"暂无待办任务\";\r\n          } else {\r\n            this.todoList = res.data.todos;\r\n            for (let item of this.todoList) {\r\n              item.status = item.isProcess;\r\n            }\r\n          }\r\n          this.backlogBadgeNum = res.data.unProcessNum;\r\n          this.sumBadge(this.backlogBadgeNum);\r\n        }\r\n      });\r\n    },\r\n    sumBadge(num) {\r\n      this.sum += num;\r\n      this.numList.push(num);\r\n      if (this.numList.length > 1) {\r\n        this.$store.dispatch(\"SetBadgeNum\", this.sum);\r\n      }\r\n    },\r\n    loadMore() {\r\n      if (this.isBacklog) {\r\n        return;\r\n      }\r\n      this.pageNum++;\r\n      this.getMyMsg();\r\n    },\r\n    toApprove(item) {\r\n      if (isEmpty(this.userinfo.nsr) == false) {\r\n        var role = this.userinfo.nsr.yhsfdm;\r\n        if (role != \"01\" && role != \"02\") {\r\n          Toast(\"您无此权限\");\r\n          return;\r\n        }\r\n      }\r\n      if (item.type == \"bssf\") {\r\n        this.$router.push(\"/entry/company/taxerIdApprove\");\r\n      } else if (item.type == \"dlba\") {\r\n        this.$router.push({\r\n          path: \"/entry/company/agencyApproveD\",\r\n          query: { dlbasqid: item.id }\r\n        });\r\n      }\r\n    },\r\n    toArticle(item) {\r\n      this.$router.push({\r\n        path: \"/entry/article\",\r\n        query: { data: JSON.stringify(item) }\r\n      });\r\n    },\r\n    toLogin() {\r\n      this.$router.push({\r\n        path: \"/login\",\r\n        query: { redirect_url: this.$route.fullPath }\r\n      });\r\n    }\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"resize\", this.msgMainPt);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.message-main {\r\n  position: fixed;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  .badge {\r\n    position: relative;\r\n    top: -$px12;\r\n    left: -$px10;\r\n    display: inline-block;\r\n    height: $px28;\r\n    min-width: $px28;\r\n    border-radius: $px14;\r\n    text-align: center;\r\n    line-height: $px28;\r\n    background-color: #ff1616;\r\n    font-size: $px24;\r\n    color: #fff;\r\n    padding: 0 $px6;\r\n  }\r\n\r\n  .no-tip {\r\n    text-align: center;\r\n    font-size: $px28;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .no-login {\r\n    text-align: center;\r\n    font-size: $px32;\r\n    padding: $px40 0;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .mint-tab-container-item {\r\n    height: 15.12rem;\r\n    overflow: auto;\r\n  }\r\n\r\n  .n-line {\r\n    color: #666;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=716a8bf6&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=716a8bf6&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"716a8bf6\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\release2\\\\fx-mobile-0729\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('716a8bf6')) {\n      api.createRecord('716a8bf6', component.options)\n    } else {\n      api.reload('716a8bf6', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=716a8bf6&scoped=true&\", function () {\n      api.rerender('716a8bf6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/message/index.vue\"\nexport default component.exports"],"sourceRoot":""}